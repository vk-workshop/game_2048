var t=document.querySelector("p.message-lose"),e=document.querySelector("p.message-win"),n=document.querySelector("p.message-start"),r=document.querySelector(".start"),c=document.querySelector(".game-score"),a=document.querySelector(".game-field"),o=a.querySelectorAll(".field-row"),s=a.querySelectorAll(".field-cell"),l=0,i=function(t){return Math.floor(Math.random()*t)},f=function(){return Array.from(s).filter(function(t){return!t.textContent})},d=function(){var t=i(16),e=9>i(10)?"2":"4";0!==f().length&&r.hasAttribute("start")&&(s[t].textContent?d():s[t].textContent=e,u(),h())},u=function(){Array.from(s).some(function(t){return"2048"===t.textContent})&&e.classList.remove("hidden")},h=function(){if(!(f().length>0)){for(var e=0;e<o.length;e++)for(var n=Array.from(o[e].children),r=0;r<n.length-1;r++)if(n[r].textContent===n[r+1].textContent)return;for(var c=0;c<4;c++)for(var a=[o[0].children[c],o[1].children[c],o[2].children[c],o[3].children[c]],s=0;s<a.length-1;s++)if(a[s].textContent===a[s+1].textContent)return;t.classList.remove("hidden")}},m=function(){s.forEach(function(t){switch(t.classList.forEach(function(e){e.startsWith("field-cell--")&&t.classList.remove(e)}),t.textContent?t.classList.add("cell-transition"):t.classList.remove("cell-transition"),t.textContent){case"2":t.classList.add("field-cell--2");break;case"4":t.classList.add("field-cell--4");break;case"8":t.classList.add("field-cell--8");break;case"16":t.classList.add("field-cell--16");break;case"32":t.classList.add("field-cell--32");break;case"64":t.classList.add("field-cell--64");break;case"128":t.classList.add("field-cell--128");break;case"256":t.classList.add("field-cell--256");break;case"512":t.classList.add("field-cell--512");break;case"1024":t.classList.add("field-cell--1024");break;case"2048":t.classList.add("field-cell--2048")}})},L=function(t){l+=t,c.textContent=l},v=function(t,e,n){for(var r=t.filter(function(t){return 0!==t});r.length<4;)r[n](0);for(var c=0;c<e.children.length;c++)e.children[c].textContent=0===r[c]?"":r[c]},g=function(t,e,n){for(var r=t.filter(function(t){return 0!==t});r.length<4;)r[n](0);for(var c=0;c<e.length;c++)e[c].textContent=0===r[c]?"":r[c]},x=function(t){for(var e=Array.from(t.children).map(function(t){return+t.textContent||0}),n=e.length-1;n>0;n--)e[n]===(e[n-1]||e[n-2]||e[n-3])&&0!==e[n]&&(L(e[n]),e[n]*=2,e[n-1]=0);v(e,t,"unshift")},C=function(t){for(var e=Array.from(t.children).map(function(t){return+t.textContent||0}),n=0;n<e.length-1;n++)e[n]===(e[n+1]||e[n+2]||e[n+3])&&0!==e[n]&&(L(e[n]),e[n]*=2,e[n+1]=0);v(e,t,"push")},k=function(){for(var t=[[],[],[],[]],e=0;e<s.length;e++)t[e%4].push(s[e]);t.forEach(function(t){for(var e=t.map(function(t){return+t.textContent||0}),n=0;n<e.length-1;n++)e[n]===(e[n+1]||e[n+2]||e[n+3])&&0!==e[n]&&(L(e[n]),e[n]*=2,e[n+1]=0);g(e,t,"push")})},b=function(){for(var t=[[],[],[],[]],e=0;e<s.length;e++)t[e%4].push(s[e]);t.forEach(function(t){for(var e=t.map(function(t){return+t.textContent||0}),n=e.length-1;n>0;n--)e[n]===(e[n-1]||e[n-2]||e[n-3])&&0!==e[n]&&(L(e[n]),e[n]*=2,e[n-1]=0);g(e,t,"unshift")})},y=function(t){switch(t){case"ArrowRight":d(),o.forEach(function(t){return x(t)}),m();break;case"ArrowUp":d(),k(),m();break;case"ArrowDown":d(),b(),m();break;case"ArrowLeft":d(),o.forEach(function(t){return C(t)}),m()}};document.addEventListener("keydown",function(t){return y(t.key)}),r.addEventListener("click",function(){s.forEach(function(t){t.textContent=""}),l=0,c.textContent=l,t.classList.add("hidden"),e.classList.add("hidden"),n.classList.add("hidden"),r.classList.add("restart"),r.textContent="Restart",r.setAttribute("start","true"),d(),d(),m()});
//# sourceMappingURL=index.9c192a7f.js.map
